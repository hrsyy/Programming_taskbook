<html>

<head> 
<title>Случайные числа</title> 
<meta http-equiv = "content-type" content = "text/html; charset = windows-1251">
<link rel="stylesheet" type="text/css" href="..\files\style.css">
</head>

<body BACKGROUND="../files/foni.gif">
<a name="Glava23"></a>
<A href="../files/oglav.htm">Оглавление</A><BR>
<h2>§23 Случайные числа</h2>

<ol>
<div>

<a name="z747"><b>747 </b></a>Если записать результаты серии бросаний монеты, то может получиться, например, 
последовательность:<br><p align="center">орел, решка, решка, орел, решка, орел, орел, орел, решка, ...</p>
<dl>Обозночив выпадение решки единицей, а выпадение орла - двойкой, получим 
числовую последовательность</dl><p align="center">2, 1, 1, 2, 1, 2, 2, 2, 2, 1, ...</p><dl>Протокол 
серии независимых испытаний, каждое из которых может иметь один из <tt>n</tt> 
равновероятных исходов (в предыдущем примере <tt>n</tt> = 2), удобно изодрожать последовательностью чисел 
1, 2, ...,   <tt>n</tt> - номеров исходов. При <tt>n</tt> = 6 (таково, 
например, число исходов при бросании игральной кости) может получиться</dl><p align="center">5, 4, 2, 1, 4, 3, 
6, 6, 5, 2, 5, 6, 1, 3, ...</p><dl>Подобного рода последовательности на 
практике могут быть использованы для подбора исходных данных для опытной проверки некоторой гипотезы, 
многократного принятия решения в повторяющейся сложной ситуации, моделирование различных физических явлений 
(например, броуновского движения) и т. д. Некоторые языки програмирования позволяют заключать в программы 
обращения к так называемым датчикам случайных чисел - опреаторам или функциям, вырабатывающим при каждом 
обращеннии чередовой член некоторой последовательности, похожей на рассмотренные выше. Обычно датчики 
устроены так что членами последовательности оказываются целые числа r<sub>0</sub>, r<sub>1</sub>, ..., 
принадлежащие интервалу (0, 1). В практических приминениях большенства таких датчиков последовательность 
r<sub>0</sub>, r<sub>1</sub>, ..., может рассматриваться как последовательность равномерно распределенных 
в интервале (0, 1) независимых случайных чисел, т.е. можно считать, что какой бы интервал (a, b) внутри (0, 1) 
мы ни взяли, при k &#8805; 0 вероятность того, что r<sub>k</sub> попадает в (a, b), не зависит от значений других 
членов последовательности и равна длине b-a этого интервала. Как правило, числа r<sub>0</sub>, r<sub>1</sub>, 
... при работе с датчиками образуется вовсе не случайно, а по определенному закону, лишь достаточно хорошо 
иметирующему случайность, поэтому правильнее говорить о псевдослучайных числах. Однако для краткости приставку 
"псевдо" часто опускают, как и упоминание о независимости чисел, и говорят о последовательности случайных чисел 
или случайной последовательности, уточняя, при необходимости, характер распределения. Так будем поступать и мы.</dl><br>  
<dl>Предпологая провести следующие эксперименты с датчиком случайных чисел:</dl>
  <ol>
    а) Получить с помощью датчика 20 чисел и оценить на глаз их "случайность" (проконтролировать отсутствие 
		   заметны закономерностей).<br>
    б) Получить с помощью датчика 300 чисел r<sub>0</sub>, r<sub>1</sub>, ..., r<sub>299</sub> и оценить по 
		   ним равномерность распределения: разбить интервал (0, 1) на 10 интервалов равной длины, построить 
			 столбчитую диаграмму(гистограмму) и секторную диаграмму, показывающие, сколько чисел из 
			 последовательности  r<sub>1</sub>, ..., r<sub>299</sub> попало в каждый интервал.
	</ol>
<br>

<a name="z748"><b>748 </b></a>Если готового датчика случайных чисел (см. предыдущую задачу) в роспоряжении 
программиста нет, то он может самостоятельно определить датчик в программе. Не вдаваясь в довольно сложную 
теорию, опишем один из таких датчиков(см.[35]). Зафиксируем некоторые натуральные <tt>a</tt>, <tt>c</tt>, 
<tt>m</tt>, <tt>s<sub>0</sub></tt> такие, что <tt>m</tt>-наибольшее из них. Определим последовательность 
неотрицательных целых чисел <tt>s<sub>0</sub></tt>, <tt>s<sub>1</sub></tt>, ... следующим правилом: 
<tt>s<sub>n</sub></tt> равно остатку от деления суммы <tt>as<sub>n-1</sub>+c</tt> на <tt>m</tt>, и вместе с 
последовательностью <tt>s<sub>0</sub></tt>, <tt>s<sub>1</sub></tt>, ... рассмотрим последовательность 
<img src="image01.gif" align="middle"> (n = 0, 1, ...). При удачном выборе <tt>a</tt>, <tt>c</tt>, 
<tt>m</tt>, <tt>s<sub>0</sub></tt> последовательность r<sub>0</sub>, r<sub>1</sub>, ... будет хорошо имитировать 
последовательность равномерно распределенных в интервале (0, 1) случайных чисел. Одним из таких воборов 
оказывается следующий:
  <ol>
    1) <tt>m</tt> = 2<tt>s<sup>k</sup></tt>, где k берется настоль большим, насколько это возможно (надо иметь 
		   в виду, что последовательность <tt>s<sub>0</sub></tt>, <tt>s<sub>1</sub></tt>, ...,   равно как и  
			 последовательность r<sub>0</sub>, r<sub>1</sub>, ..., будет периодической с периодом 2<tt>s<sup>k</sup></tt>; 
			 при небольших значениях <tt>k</tt> периодичность будет слишком заметной).<br>
		2) При делении <tt>a</tt> на 8 должен получаться остаток 5. Кроме этого, требуется, чтобы выполнялось 
		   <img src="image02.gif">.<br>
		3) Число <tt>с</tt> должно быть нечетным; при этом желательно, чтобы выполнялось приближенное равенство 
		   <img align="middle" src="image03.gif"><br>
		4) Число <tt>s<sub>0</sub></tt> можно выбрать произвольно в диапозоне от 0 до <tt>m</tt>-1.
</ol>
<dl>В связи со сказанным предпологаются следующие задания:</dl>
  <ol>
    а) Подобрать несколько вариантов троек <tt>a</tt>, <tt>c</tt>, <tt>m</tt>, удовлетворяющих условию 1) - 3).<br>
		б) Найти еще какое-нибудь соображение, позволяющее хорошо имитировать случаность, и на его основе описать 
		   новый датчик.<br>
		в) Пользуясь различными датчиками, среди которых должны быть датчики, построеные по предложенной выше схеме 
		   с различным выбором <tt>a</tt>, <tt>c</tt>, <tt>m</tt>, <tt>s<sub>0</sub></tt>, и "самодельные" датчики, 
			 построеные на других соображениях, требуется провести эксперименты, описанные в предыдущей задаче.
  </ol>
<br>
		
<a name="z749"><b>749 </b>Датчики случайных чисел находят интересное применение в вычислении площадей и объемов: 
на этом применении основан известный метод Монте-Карло (объяснение происхождения названия иподробное изложение 
самого метода с многочисленными примерами приложений имеется, например, в [47]). Пусть задана фигура М, целиком 
лежащяя внутри единичного квадрата, и пусть нужно вычислить ее площадь. Пусть в единичном квадрате выбрано наугад 
n точек (рис. 42) и пусть U(n) - число точек, попавших внутрь М. Тогда геометрически ясно, что при больших n 
площадь фигуры М будет приближенно равна U(n)/n и чем больше будет n, тем ближе мы подойдем к истинному значению 
площади. В качестве выбираемых "наугад" точек в этих вычислениях можно взять точки с координатами (r<sub>0</sub>, 
r<sub>1</sub>), (r<sub>2</sub>, r<sub>3</sub>), ..., где в роли r<sub>0</sub>, r<sub>1</sub>), ... выступают числа, 
получаемые с помощью датчика случайных чисел, равномерно распредеденных в интервале (0, 1).<br> 
<p align="center"><img src="image05.gif" align="middle"><img src="image04.gif" align="middle"></p>
</dl>Аналогично, беря точки с координатами (r<sub>0</sub>, r<sub>1</sub>, 
r<sub>2</sub>), (r<sub>3</sub>, r<sub>4</sub>, r<sub>5</sub>), ..., можно вычислять объемы тел, целиком лежащие 
внутри единичного куба.</dl><dl> В связи с методом Монте-Карло предлагаются 
следующие задания. Воспользовавшись несколькими датчиками (в крайнем случае одним датчиком):</dl>
  <ol>
    а) определить площадь круга (x - 0,5)<sup>2</sup> + (y - 0,5)<sup>2</sup> < 1/4; для этого найти по 200 точек с 
		   помощью каждого из датчиков; ответ сравнить с &#960/4.<br>
		б) определить объём шара (x - 0,5)<sup>2</sup> + (y - 0,5)<sup>2</sup> + (z - 0,5)<sup>2</sup> < 1/4; для этого 
		   найти по 200 точек с помощью каждого из датчиков; ответ сравнить с &#960/6.	 
  </ol>			
<br>
			
<a name="z750"><b>750 </b>Случайная числовая последовательность r<sub>0</sub>, r<sub>1</sub>,  ..., члены 
которой равномерно распределены в интервале(0,1), может быть использована для построения случайной последовательности 
U<sub>0</sub>, U<sub>1</sub>, ..., члены которой принадлежат конечному множеству, состоящему из элементов 
x<sub>1</sub>, ...,x<sub>n</sub>. Элементы x<sub>1</sub>, ..., x<sub>n</sub> повторяются в последовательности 
U<sub>0</sub>, U<sub>1</sub>, ... с заданными частотами, соответственно равными p<sub>1</sub>, ..., p<sub>n</sub> 
(т.е. относительно последовательности U<sub>0</sub>, U<sub>1</sub>, ... можно считать, что x<sub>i</sub> 
встречается в ней с вероятностью p<sub>i</sub> (i = 1, ..., n), p<sub>1</sub>+...+p<sub>n</sub>=1). 
Последовательность U<sub>0</sub>, U<sub>1</sub>, ... будем называть случайной последовательностью с 
распределением<img src="image06.gif"  align="middle" >. Для построения U<sub>0</sub>, U<sub>1</sub>, ... 
используется следующий прием [47]. Интервал (0, 1) разбиваем на n интервалов, длины которых равны p<sub>1</sub>, 
..., p<sub>n</sub>. Координатами точек разбиения будут p<sub>1</sub> +p<sub>2</sub>, p<sub>1</sub> + 
p<sub>2</sub> + p <sub>3</sub>, ..., p<sub>1</sub> + p<sub>2</sub> +...+p<sub>n-1</sub>. Полученные интервалы 
обозначаем через I<sub>1</sub>, ..., I<sub>n</sub>. Теперь перебираем числа r<sub>0</sub>, r<sub>1</sub>, 
r<sub>2</sub>, ..., и если очередное число r<sub>k</sub> попадает в интервал I<sub>j</sub> (1 &#8804; j &#8804; n), 
то в качестве U<sub>k</sub> берем r<sub>j</sub>(в силу равномерного распределения членов последовательности 
r<sub>0</sub>, r<sub>1</sub>, ... в интервале (0, 1) вероятность попадания r<sub>k</sub> в некоторый интервал 
равна длине этого интервала). Если вдруг окажется, что r<sub>k</sub> совпадает с точкой разбиения(концом интервала), 
то можно условно считать, что число r<sub>k</sub> попало в интервал, лежащий справа от него.<br>&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; Предлогаются следующие задания, в которых надо воспользоваться датчиком случайных чисел:
  <ol>
    а) Построить 100 первых членов случайной последовательности из нулей и единиц, в которой нуль и единица 
		   равновероятны, т.е. последовательности с распределением (<img src="image08.gif" align="middle">)<br>
    б) Построить 100 первых членов случайной последовательности из цифр 1,2,3,4,5,6, в которой все эти цифры 
		   равновероятны, т.е. последовательности с распределением <img src="image09.gif" align="middle">.<br>
    в) Построить 100 первых членов случайной последовательности из нулей и единиц, в которой нуль встречается 
		   с вероятностью 1/4, а единица-с вероятностью 3/4, т.е. последоватнльности с распредилением 
			 <img src="image10.gif" align="middle">.<br>
    г) Построить 100 первых членов случайной последовательности из слов "камень", "ножницы", "бумага", в которой 
		   эти три слова равновероятны, т.е. последовательности с распределением <img src="image11.gif" align="middle">. 
			 (Эту последовательность можно использовать для выбора ходов в известной игре "камень", "ножницы", "бумага".)<br>
    д) Построить 100 первых членов случайной последовательности из слов "камень", "ножницы", "бумага", в которой 
		   слово камень встречается с вероятностью 1/3, слово "ножницы"-с вероятностью 1/2, слово "бумага"-с 
			 вероятностью 1/6, т.е. последовательности с распределением <img src="image12.gif" align="middle">. 
			 (Эту последовательность можно использовать для выбора ходов в известной игре "камень", "ножницы", "бумага" 
			 со следующей системой премий: когда "камень" тупит "ножницы", присуждается одно очко, когда "ножницы" режут 
			 "бумагу", присуждается два очка, когда "бумага" покрывает "камень", присуждается три очка.)
  </ol>			 
<br>

<a name="z751"><b>751</b>Для наглядной демонстрации некоторых законов теории вероятностей используется прибор, 
называемый доской Гальтона (рис. 44).<p align="center"><img src="image13.gif"align="middle"> 
<img src="image14.gif"align="middle"> </p><dl>Металлические шарики по очереди 
попадают в верхний канал; встретив препятствие, они должны выбрать путь налево или направо, затем происходит 
второй выбор и т. д. Каждый из выборов случаен, каждая из вероятностей выбора пути налево и направо равна 1/2. 
При достаточно высоком качестве прибора наблюдаемая картина распределения шариков в нижних отделениях доски 
Гальтона хорошо согласуется с вероятностными расчетами, по которым количества шариков, оказавшихся в отделениях, 
пронумерованных числами 1, ..., m (на рис. 44 m=5), должны быть пропорциональными (с некоторым коэффициентом 
пропорциональности, зависящим от общего числа шариков) числам из m-й строки треугольника Паскаля (см. задачу 555). 
Кривая, огибающяя верхушки столбцов из шариков, должна иметь колоколообразную форму (рис. 45). Путь шарика по доске 
Гальтона, содержащей m нижних отделений, можно изобразить группой из m нулей и единиц: нуль изображает выбор пути 
налево, единица - направо. Получив с помощью датчика случайных чисел mn членов случайной последовательности 
U<sub>0</sub>, U<sub>1</sub>, ... из нулей и единиц с распределением <img src="image15.gif"align="middle"> (см. 
задачу 750а) и взяв группы (U<sub>0</sub>, ...,U<sub>m-1</sub>), (U<sub>m</sub>, ..., U<sub>2m-1</sub>), ..., 
(U<sub>(n-1)m</sub>, ..., U<sub>nm</sub>), мы получим изображения путей n воображаемых шариков. Номер отделения, 
в которое попадает шарик, определяется по количеству единиц в изображении маршрута. Пусть даны натуральные n и m 
(n >= 2<sup>m</sup>). Требуется подсчитать, исходя из модели, которая основана на датчике случайных чисел, 
количество воображаемых шариков, попавших в каждое из отделений. Построить графические представления результатов 
подсчета (колоколообразность диаграммы или граыика будет говорить о хорошем качестве датчика.)</dl><br>

<a name="z752"><b>752 </b>Датчики случайных чисел могут использоваться для построения на вычислительных машинах 
моделей сложных физических явлений. Пусть имеются два закрытых сосуда, первый из которых наполнен газом, а второй 
пуст. Сосуды соединены трубкой, перекрытой клапаном. После того как клапан откроют, молекулы газа будут стремиться 
перейти из области с более высоким давлением в область с более низким давлением. Но взаимные столкновения молекул 
и их столкновения со стенками сосудов и трубки будут приводить к тому, что любая из молекул может изменить свое 
движение на противоположное, поэтому картина выравнивания давлений в первом и втором сосудах будет непростой. В 
начале ХХ века физики П. и Т. Эренфесты описали интересную модель этого явления. Первый сосуд наполнен большим 
количеством пронумерованных шаров, а второй сосуд пуст. Третий сосуд наполнен билетиками, пронумерованными так же, 
как и шары. Вытягивается наудачу билетик, затем отыскивается шар с вытянутым номером и этот шар перекладывается из 
этого сосуда, в котором он находился, в другой сосуд. Затем билетик возвращается в третий сосуд и процедура 
возобнавляется. Модель П. и Т. Эренфестов очень удобно реализуется программой. Разделение n вображаемых шаров по 
двум сосудам может быть описано, на пример, массивом с n элементами, равными -1 (шар в первом сосуде). Вытягивание 
шаров легко заменить получением членов случайной последовательности с распределением 
<img src="image16.gif" align="middle"> (см. задачу 750); величину n желательно брать как можно больше, не менее 1000. 
Построить график или диаграмму, отмечая отношение количеств шаров в соудах через каждые 100 шагов.<br><br>

<a name="z753"><b>753 </b>Датчики случайных чисел можно привлекать при подборе проверочных исходных данных для 
программ.<br><dl>Получить с помощью датчика случайных чисел:</dl>
  <ol>
    а) 25 действительных чисел, лежащих в диапазоне от -50 до 50;<br> 
    б) 30 целых чисел, лежащих в диапазоне от -20 до 20;<br>      
    в) 20 неотрицательных действительных чисел, не превосходящих 40;<br>
    г) 35 неотрицательных целых чисел, не превосходящих 100;<br>
    д) 27 натуральных чисел, не превосходящих 20;<br>
    е) натуральное n, не превосходящих 30, и n действительных чисел, лежащих в диапазоне от -100 до 100;<br>
    ж) натуральные n, m, не превосходящих 20; n целых чисел, лежащих в диапазоне от -150 до 150; m неотрицательных 
		   действительных чисел не превосходящих n;<br>
    з) 15 чисел, среди которых 7 двоек и 8 троек;<br>
    и) перестановку чисел 1, ..., 12, т. е. последовательность чисел p<sub>1</sub>, ..., p<sub>12</sub>, в 
		   которую входит каждое из чисел 1, ..., 12;<br>
    к) 28 малых латинских букв;<br>
    л) 5 неповторяющихся малых латинских букв.
  </ol>
<br>

<a name="z754"><b>754 </b>Возможно, что при решении задачи на вычислительной машине придётся вначале получать 
члены случайной последовательности с некоторым распределением<p align="center" ><img src="image17.gif"></p>
(см. задачу 750), а затем перейти к последовательности с каким-то другим распределением. Рассмотрим, например 
схему такой программы проверки знаний (точнее, программы-тренажёра), которая вразбивку предлагает вопросы из 
некоторого набора вопросов x<sub>1</sub>...x<sub>n</sub>. Вопрос выбирается случайно, вначале все вопросы 
равноправны и распределение есть<p align="center"><img src="image18.gif"></p><dl>Далее можно 
придерживаться следующей стратегии. Если на вопрос p<sub>i</sub>, который предлагается самым 
первым, был получен правильный ответ (правильность устанавливается сравнением полученного ответа с известным 
ответом), то этот вопрос исключается из набора вопросов и происходит переход к распределению
<p align="center"><img src="image19.gif"></p> если ответ был неправильным, то обьявляется правильный ответ и 
происходит переход к распределению <p align="center"><img src="image07.gif"></p> т. е. как бы считается, что 
набор теперь содержит n + 1 вопрос, два из которых совпадают (x<sub>i</sub> входит в набор с кратностью 2). 
В результате этого трудный вопрос будет предлагаться в дальнейшем чаще, чем более легкие. После каждого 
полученного ответа распределение меняется так, что если был предложен вопрос, имеющий кратность k (k > 0), 
и на него был получен правильный ответ, то k уменьшается на 1. Если в результате уменьшения на 1 оказалось, 
что k = 0, то вопрос исключается из набора. Знания могут быть оценены по количеству вопросов, заданных до того 
момента, когда набор вопросов стал пустым. Реализовать эту стратегию в программе проверки знания таблицы 
умножения на 7 или проверки знания переводов некоторого количества английских (французских, немецких, ...) слов.
</dl>

</div>
</ol>

<table noborder width="100%">
 <tr>
  <td align="left">  <font size="5"><a href="..\glava22\index22.htm#Glava22"><img border="0" src="..\files\arrow_l.gif">Предыдущая глава</a></font></td>
  <td align="center"><font size="5"><a href="#Glava23">К началу</a></font></td>
  <td align="right"> <font size="5"><a href="..\glava24\index24.htm#Glava24">Следующая глава<img border="0" align="middle" src="..\files\arrow_r.gif"></a></font></td>
 </tr>
</table>

</body>
</html>